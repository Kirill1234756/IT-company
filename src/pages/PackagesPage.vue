<script setup lang="ts">
import { ref } from 'vue'
import { useRouter } from 'vue-router'
import { defineAsyncComponent } from 'vue'
import type { PackageCardProps } from '../components/PackageCard.vue'
import { useYandexMetrika } from '../composables/useYandexMetrika'

const PackageCard = defineAsyncComponent(() => import('../components/PackageCard.vue'))
const Breadcrumbs = defineAsyncComponent(() => import('../components/ui/Breadcrumbs.vue'))
const { trackButtonClick } = useYandexMetrika()

const router = useRouter()

// –ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥
const packages = ref<PackageCardProps[]>([
  {
    id: 1,
    title: '–°—Ç–∞—Ä—Ç–æ–≤—ã–π –ø–∞–∫–µ—Ç',
    description:
      '–ò–¥–µ–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ –±–∏–∑–Ω–µ—Å–∞. –°–∞–π—Ç-–≤–∏–∑–∏—Ç–∫–∞ —Å –±–∞–∑–æ–≤–æ–π SEO-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.',
    price: '–æ—Ç 80 000 ‚ÇΩ',
    originalPrice: '–æ—Ç 100 000 ‚ÇΩ',
    features: [
      '–°–∞–π—Ç-–≤–∏–∑–∏—Ç–∫–∞ –¥–æ 5 —Å—Ç—Ä–∞–Ω–∏—Ü',
      '–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω',
      '–ë–∞–∑–æ–≤–∞—è SEO-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è',
      '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π',
      '–û–±—É—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–µ —Å —Å–∞–π—Ç–æ–º',
      '–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ 1 –º–µ—Å—è—Ü',
    ],
    icon: 'üöÄ',
    iconBg: 'from-blue-50 to-indigo-100',
    slug: 'starter',
  },
  {
    id: 2,
    title: '–ë–∏–∑–Ω–µ—Å –ø–∞–∫–µ—Ç',
    description:
      '–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –±–∏–∑–Ω–µ—Å–∞. –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–∞–π—Ç —Å –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π.',
    price: '–æ—Ç 180 000 ‚ÇΩ',
    originalPrice: '–æ—Ç 220 000 ‚ÇΩ',
    features: [
      '–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–∞–π—Ç –¥–æ 10 —Å—Ç—Ä–∞–Ω–∏—Ü',
      '–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω',
      'SEO-–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞',
      '–ö–æ–Ω—Ç–µ–Ω—Ç-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥',
      '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è CRM',
      '–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ 3 –º–µ—Å—è—Ü–∞',
      '–ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ –æ—Ç—á–µ—Ç—ã',
    ],
    icon: 'üíº',
    iconBg: 'from-purple-50 to-pink-100',
    isPopular: true,
    slug: 'business',
  },
  {
    id: 3,
    title: 'E-commerce –ø–∞–∫–µ—Ç',
    description:
      '–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏, –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ–¥–∞–∂.',
    price: '–æ—Ç 350 000 ‚ÇΩ',
    originalPrice: '–æ—Ç 420 000 ‚ÇΩ',
    features: [
      '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º',
      '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º',
      'CRM –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è',
      'SEO-–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤',
      '–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è —Ä–µ–∫–ª–∞–º–∞ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)',
      '–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)',
      '–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ 6 –º–µ—Å—è—Ü–µ–≤',
    ],
    icon: 'üõí',
    iconBg: 'from-green-50 to-emerald-100',
    slug: 'ecommerce',
  },
  {
    id: 4,
    title: '–ü—Ä–µ–º–∏—É–º –ø–∞–∫–µ—Ç',
    description:
      '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∫—Ä—É–ø–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞. –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.',
    price: '–æ—Ç 600 000 ‚ÇΩ',
    originalPrice: '–æ—Ç 750 000 ‚ÇΩ',
    features: [
      '–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–∞–π—Ç –∏–ª–∏ SaaS-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞',
      '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω',
      'SEO-–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ 12 –º–µ—Å—è—Ü–µ–≤',
      '–ö–æ–Ω—Ç–µ–Ω—Ç-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è',
      '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è',
      '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º',
      '–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ',
      '–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ 12 –º–µ—Å—è—Ü–µ–≤',
      '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä',
    ],
    icon: '‚≠ê',
    iconBg: 'from-yellow-50 to-orange-100',
    slug: 'premium',
  },
])

const handlePackageClick = (packageData: PackageCardProps) => {
  // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∫–ª–∏–∫ –ø–æ –ø–∞–∫–µ—Ç—É
  trackButtonClick(`package-${packageData.slug}`, {
    package_id: packageData.id,
    package_title: packageData.title,
    package_price: packageData.price,
  })

  // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ñ–æ—Ä–º—É –∫–ª–∏–µ–Ω—Ç–∞ —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  router.push({
    path: '/client-form',
    query: {
      package: packageData.slug,
      packageTitle: packageData.title,
    },
  })
}
</script>

<template>
  <div class="min-h-screen py-[5rem] px-4 md:px-8 lg:px-[8rem] bg-text">
    <main class="max-w-7xl mx-auto">
      <!-- Breadcrumbs -->
      <Breadcrumbs
        :items="[
          { label: '–ì–ª–∞–≤–Ω–∞—è', to: '/' },
          { label: '–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥' },
        ]"
        class="mb-8"
      />

      <!-- Header Section -->
      <div class="mb-12 text-center">
        <h1
          class="text-3xl md:text-5xl font-bold text-purple mb-4 font-display"
          style="font-family: 'IBM Plex Sans Condensed', sans-serif"
        >
          –ì–æ—Ç–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã —É—Å–ª—É–≥
        </h1>
        <p class="text-lg md:text-xl text-text-muted max-w-3xl mx-auto">
          –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞. –ö–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å —É—Å–ª—É–≥ —Å
          –≤—ã–≥–æ–¥–Ω–æ–π —ç–∫–æ–Ω–æ–º–∏–µ–π.
        </p>
      </div>

      <!-- Packages Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 mb-12">
        <PackageCard
          v-for="pkg in packages"
          :key="pkg.id"
          :id="pkg.id"
          :title="pkg.title"
          :description="pkg.description"
          :price="pkg.price"
          :original-price="pkg.originalPrice"
          :features="pkg.features"
          :icon="pkg.icon"
          :icon-bg="pkg.iconBg"
          :is-popular="pkg.isPopular"
          :slug="pkg.slug"
          @click="handlePackageClick"
        />
      </div>

      <!-- Benefits Section -->
      <div class="mb-12 p-8 md:p-12 rounded-3xl border border-border bg-bg/50">
        <h2 class="text-2xl md:text-3xl font-bold mb-6 text-center font-display">
          –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–∞–∫–µ—Ç–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="text-center">
            <div class="text-4xl mb-4">üí∞</div>
            <h3 class="text-lg font-semibold mb-2">–≠–∫–æ–Ω–æ–º–∏—è –¥–æ 20%</h3>
            <p class="text-sm text-text-muted">
              –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ –ø–∞–∫–µ—Ç–∞ –≤—ã —ç–∫–æ–Ω–æ–º–∏—Ç–µ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –∑–∞–∫–∞–∑–æ–º —É—Å–ª—É–≥ –æ—Ç–¥–µ–ª—å–Ω–æ
            </p>
          </div>
          <div class="text-center">
            <div class="text-4xl mb-4">‚ö°</div>
            <h3 class="text-lg font-semibold mb-2">–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</h3>
            <p class="text-sm text-text-muted">
              –í—Å–µ —É—Å–ª—É–≥–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
            </p>
          </div>
          <div class="text-center">
            <div class="text-4xl mb-4">üéØ</div>
            <h3 class="text-lg font-semibold mb-2">–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–¥—Ö–æ–¥</h3>
            <p class="text-sm text-text-muted">
              –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            </p>
          </div>
        </div>
      </div>

      <!-- CTA Section -->
      <div class="text-center p-8 md:p-12 rounded-3xl border border-border bg-gradient-accent">
        <h3 class="text-2xl md:text-3xl font-bold mb-4 text-bg font-display">
          –ù—É–∂–µ–Ω –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç?
        </h3>
        <p class="text-lg mb-6 text-bg/90">
          –ú—ã –º–æ–∂–µ–º —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç —É—Å–ª—É–≥ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="/calculator"
            class="px-8 py-4 rounded-full font-semibold bg-bg text-accent hover:bg-bg/90 transition-colors"
          >
            –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å
          </a>
          <a
            href="/client-form"
            class="px-8 py-4 rounded-full font-semibold border-2 border-bg text-bg hover:bg-bg/10 transition-colors"
          >
            –û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
          </a>
          <a
            href="/contacts"
            class="px-8 py-4 rounded-full font-semibold border-2 border-bg text-bg hover:bg-bg/10 transition-colors"
          >
            –°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏
          </a>
        </div>
      </div>
    </main>
  </div>
</template>

<style scoped>
/* Custom styles for packages page */
.package-card {
  min-height: 100%;
}
</style>

